import{J as te,K as re,R as h,M as xe,N as F,Q as H,V as G,j as s,S as k,W as Z,F as P,U as N,r as he,X as I,Y,t as Q,T as S,l as R,Z as V,L as ne,m as ie,$ as ee,a0 as E,a1 as ge,p as ae,G as z,a2 as ye,a3 as be,a4 as le,a5 as fe}from"./index-4567d11c.js";import{O as se,T as B,u as je}from"./tableView-9874d410.js";import{u as ve}from"./use-kyc-b2cd9d19.js";import{u as Ce}from"./use-utils-f92e6887.js";import{C as Pe}from"./CopyAll-c77268ed.js";import{B as Te}from"./ButtonGroup-1d56cd83.js";import"./responsive-table-d0b9fcb6.js";import"./TableRow-90bf4727.js";import"./Pagination-09178b23.js";const K=(r,n,e,a,l)=>{const{coinId:b}=te(),t=re(),[u,c]=h.useState(""),[d,m]=h.useState(),[o,p]=h.useState(),[i,x]=h.useState(0),[g,v]=h.useState(e),[$,A]=h.useState(e),[_,O]=h.useState(0),[T,D]=h.useState("buy"),C=h.useMemo(()=>(T==="buy"?a.buyer_fees:a.seller_fees)/100,[a,T]),f=h.useMemo(()=>T==="buy"?r:n*e,[T,r,n]),L=h.useMemo(()=>f-f*C,[f,C]),y=h.useMemo(()=>l==="market"?e:g,[g,l,e]),W=h.useCallback(()=>D("buy"),[]),M=h.useCallback(()=>D("sell"),[]),oe=h.useCallback((w,j)=>{f&&(m(+(j/100*(f/y)).toFixed(8)),p(+(j/100*f).toFixed(2)))},[f,y]),U=h.useCallback(()=>{p(L),m(+(L/y).toFixed(8))},[L,y]),ce=h.useCallback(w=>{if(!f)return;const j=+w.target.value;if(j){if(j*y-j*y*C>f){U();return}m(j),p(j*y)}else m(void 0),p(void 0)},[f,y,C]),ue=h.useCallback(w=>{if(!f)return;const j=+w.target.value;if(j){if(j-j*C>f){U();return}p(j),m(j/y)}else p(void 0),m(void 0)},[f,y,C]),de=h.useCallback(w=>{if(!e)return;const j=+w.target.value;v(+j)},[e]),me=h.useCallback(w=>{if(!e)return;const j=+w.target.value;A(+j)},[e]),pe=()=>{m(""),p(""),o&&x(o+o*C),v(e),A(e),O(0),setTimeout(()=>t.invalidateQueries("coin"),1e3)};return document.addEventListener("change",w=>c(w.target.value)),h.useEffect(()=>{d&&d*y-d*y*C>f&&U(),g===void 0&&v(e)},[u,T,b,e,C,f]),h.useEffect(()=>{o&&d?(O(+(o/L*100).toFixed(2)),x(+(l==="market"?o+o*C:d*g+d*g*C).toFixed(2))):(O(0),x(0))}),{amount:o,coins:d,total:i,limitPrice:g,stopLimitPrice:$,slider:_,order:T,clear:pe,handleAmount:ue,handleCoin:ce,handleLimit:de,handleStopLimit:me,handlePercentage:oe,handleBuy:W,handleSell:M}},q=(r,n)=>{const e=re(),a=H,[l,b]=h.useState(!1),{loading:t,add:u,set:c}=xe(!0);return{loading:t||l,cancel:async(o,p)=>{n==="binance"?await F("cancelTrade",{coin:p,orderid:o}).then(i=>{var x;e.invalidateQueries("userCoinWallet"),e.invalidateQueries("getTrades"),a({message:i.error?i.message:(x=i.message)==null?void 0:x.msg,variant:"error"})}).catch(i=>a({message:i.message,variant:"error"})):n==="kucoin"?await F("cancelTradeV2",{coin:p,orderid:o}).then(i=>{var x;return a({message:i.error?i.message:(x=i.message)==null?void 0:x.msg,variant:"error"})}).catch(i=>a({message:i.message,variant:"error"})):(F({method:"delete",url:`/spot/trades/${o}`}).then(i=>a({message:i.message,variant:"error"})).catch(i=>a({message:i.message,variant:"error"})),await c(`users/${r}/cancelTrades`,o,{tradeId:o,coinId:p,uid:r}).then(i=>{e.invalidateQueries("userCoinWallet"),e.invalidateQueries("getTrades")}).catch(i=>a({message:i.message,variant:"error"})))},trade:async(o,p)=>{p>=12&&n==="binance"||n!=="binance"?n==="binance"?(b(!0),await F("placeOrder",{coin:o.coin,currency_id:o.coinPair,coinPair:o.coinPair,quantity:o.noOfCoins,orderType:o.orderType,marketPrice:o.filledPrice||1,limitPrice:o.limitPrice,stopPrice:o==null?void 0:o.stopPrice}).then(i=>{var x,g,v;e.invalidateQueries("userCoinWallet"),e.invalidateQueries("getTrades"),a({message:i.error?(x=i.message)!=null&&x.msg?(g=i.message)==null?void 0:g.msg:i.message:(v=i.message)==null?void 0:v.msg,variant:"error"})}).catch(i=>a({message:i.message,variant:"error"})).finally(()=>b(!1))):await F("placeOrder",{amount:o.noOfCoins,coinPair:`${o.coin}/${o.coinPair}`,price:o.filledPrice||o.limitPrice,side:o.side}).then(i=>{a({message:i.message,variant:"success"})}).catch(i=>a({message:i.message,variant:"error"})):a({message:"Trade can only be executed with Minimum 12 USDT",variant:"error"})}}},Se=G(s.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),Ie=G(s.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"}),"ArrowUpward"),Oe=G(s.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline"),we=({amountBalance:r,coinBalance:n,coin:e})=>s.jsxs(k,{id:"coinPairBalance",sx:{bgcolor:a=>a.palette.mode==="dark"?"#ffffff10":`${a.palette.primary.main}10`,border:a=>`1px solid ${a.palette.mode==="dark"?"#fffff50":`${a.palette.primary.main}40`}`,borderRadius:1,p:1.5,width:"100%"},spacing:1,children:[s.jsx(Z,{direction:"row",title:`${e.currency} Balance`,label:s.jsx(P,{number:r,type:"coin",coin:e.currency}),medium:!0,node:!0}),s.jsx(Z,{direction:"row",title:`${e.coin} Balance`,label:s.jsx(P,{number:n,type:"coin",coin:e.coin}),medium:!0,node:!0})]}),Ae=({amountBalance:r,coinBalance:n,coin:e})=>{const a=H,{user:l}=h.useContext(N),{loading:b,trade:t}=q(l==null?void 0:l.uid,e==null?void 0:e.bot_status),u=.004,c=e.current_price,{amount:d,coins:m,limitPrice:o,slider:p,order:i,clear:x,handleAmount:g,handleCoin:v,handleLimit:$,handlePercentage:A,handleBuy:_,handleSell:O}=K(r,n,c,e,"limit"),[T,D]=he.useState("0.00000"),C=y=>{let W;i==="buy"?W=y*10-y*10*u:W=(y-y*u)*.1;const M=W.toFixed(5);console.log("Total Amount:",M),D(M)},f=()=>{const y={coinId:e==null?void 0:e.coinId,coin:e.coin,coinPair:e.currency,commission:u,limitPrice:o,noOfCoins:d||0,orderType:2,orderPlacedTime:new Date().getTime(),uid:l==null?void 0:l.uid,side:i},W={coinId:e==null?void 0:e.coinId,coin:e.coin,coinPair:e.currency,commission:u,limitPrice:o,noOfCoins:m||0,orderType:5,orderPlacedTime:new Date().getTime(),uid:l==null?void 0:l.uid,side:i};i==="buy"&&(d||0)>r||i==="buy"&&(d||0)===0||i==="sell"&&(m||0)>n?a({message:"Insufficient balance!",variant:"error"}):i==="buy"&&(d||0)===0||i==="sell"&&(m||0)===0?a({message:"Amount cannot be empty",variant:"error"}):t(i==="buy"?y:W,d||0),x()},L=()=>{x(),D("0.00000")};return console.log("COMMISSION",u),s.jsxs(s.Fragment,{children:[s.jsx(J,{coin:e==null?void 0:e.coin,order:i,handleBuy:_,handleSell:O,onOrderChange:L}),s.jsx(I,{start:"Price",end:e==null?void 0:e.currency,onChange:$,value:.1,disabled:!0}),i==="buy"?s.jsx(I,{start:"Amount",end:e==null?void 0:e.currency,onChange:y=>{g(y),C(Number(y.target.value))},value:d}):s.jsx(I,{start:"Amount",end:e==null?void 0:e.coin,onChange:y=>{v(y),C(Number(y.target.value))},value:m}),s.jsx(Y,{value:p,onChange:A}),s.jsx(I,{start:"Trading Fees",end:i==="buy"?e==null?void 0:e.coin:e==null?void 0:e.currency,value:+T*u,disabled:!0,sx:{bgcolor:y=>`${y.palette.error.light}20`,borderRadius:1,"& fieldset":{borderWidth:0}}}),s.jsx(I,{start:"Total",end:i==="buy"?e==null?void 0:e.coin:e==null?void 0:e.currency,value:T,disabled:!0,sx:{bgcolor:y=>`${y.palette.error.light}20`,borderRadius:1,"& fieldset":{borderWidth:0}}}),s.jsx(X,{onClick:f,loading:b})]})},Le=({AmountBalance:r,coin:n,CoinBalance:e,loading:a})=>{const[l,b]=h.useState(0),t=h.useMemo(()=>{const c=(r==null?void 0:r.find(({typeId:d})=>d===n.currency))||{balance:0,freeze:0};return c.balance-Math.abs(c.freeze)},[n.coinId,a]),u=h.useMemo(()=>{const c=(e==null?void 0:e.find(({typeId:d})=>d===n.coin))||{balance:0,freeze:0};return c.balance-Math.abs(c.freeze)},[n.coinId,a]);return s.jsxs(Q,{justifyContent:"flex-start",spacing:1,sx:{width:"100%",minHeight:"100%"},customTitle:s.jsx(S,{variant:"subtitle1",color:"primary.main",fontWeight:"bold",children:"Trade"}),children:[s.jsx(k,{spacing:1.5,sx:{pt:2,height:"100%"},children:s.jsx(we,{amountBalance:t,coinBalance:u,coin:n})}),{0:s.jsx(Ae,{amountBalance:t,coinBalance:u,coin:n}),1:s.jsx(ze,{amountBalance:t,coinBalance:u,coin:n}),2:s.jsx($e,{amountBalance:t,coinBalance:u,coin:n})}[l]]})},ze=({amountBalance:r,coinBalance:n,coin:e})=>{const a=H,{user:l}=h.useContext(N),{loading:b,trade:t}=q(l==null?void 0:l.uid,e==null?void 0:e.bot_status),u=e.current_price,c=e.commission,{amount:d,coins:m,slider:o,order:p,clear:i,handleAmount:x,handleCoin:g,handlePercentage:v,handleBuy:$,handleSell:A}=K(r,n,u,e,"limit"),_=()=>{const O={coinId:e==null?void 0:e.coinId,coin:e.coin,coinPair:e.currency,commission:c,filledPrice:u,noOfCoins:(["binance","kucoin"].includes(e.bot_status)?d:m)||0,orderType:1,orderPlacedTime:new Date().getTime(),uid:l==null?void 0:l.uid,side:p},T={coinId:e==null?void 0:e.coinId,coin:e.coin,coinPair:e.currency,commission:c,filledPrice:u,noOfCoins:m||0,orderType:4,orderPlacedTime:new Date().getTime(),uid:l==null?void 0:l.uid,side:p};p==="buy"&&(d||0)>r||p==="sell"&&(m||0)>n?a({message:"Insufficient balance!",variant:"error"}):p==="buy"&&(d||0)===0||p==="sell"&&(m||0)===0?a({message:"Amount cannot be empty",variant:"error"}):t(p==="buy"?O:T,d||0),i()};return s.jsxs(s.Fragment,{children:[s.jsx(J,{coin:e==null?void 0:e.coin,order:p,handleBuy:$,handleSell:A}),p==="buy"?s.jsx(I,{start:"Amount",end:e==null?void 0:e.currency,onChange:x,value:d}):s.jsx(I,{start:"Amount",end:e==null?void 0:e.coin,onChange:g,value:m}),s.jsx(Y,{value:o,onChange:v}),s.jsx(I,{start:"Total",end:p==="buy"?e==null?void 0:e.coin:e==null?void 0:e.currency,value:(p==="buy"?m||0:d||0).toFixed(5),disabled:!0,sx:{bgcolor:O=>`${O.palette.error.light}20`,borderRadius:1,"& fieldset":{borderWidth:0}}}),s.jsx(X,{onClick:_,loading:b})]})},J=({coin:r,order:n,handleBuy:e,handleSell:a,onOrderChange:l})=>s.jsxs(k,{direction:"row",justifyContent:"space-between",spacing:1,id:"orderType",children:[s.jsxs(R,{size:"small",variant:n==="sell"?"contained":"outlined",color:"error",fullWidth:!0,onClick:()=>{a(),l()},children:["Sell ",r]}),s.jsxs(R,{size:"small",variant:n==="buy"?"contained":"outlined",color:"success",fullWidth:!0,onClick:()=>{e(),l()},children:["Buy ",r]})]}),X=r=>{const{verified:n}=ve(!1);return s.jsx(k,{id:"placeOrder",sx:{mt:{lg:"auto !important"},mb:{lg:0}},children:n?s.jsx(V,{...r,size:"small",variant:"contained",fullWidth:!0,children:"Place a Order"}):s.jsx(V,{component:ne,to:`${ie.base}kyc/warning`,size:"small",variant:"contained",fullWidth:!0,children:"Place a Order"})})},$e=({amountBalance:r,coinBalance:n,coin:e})=>{const a=H,{user:l}=h.useContext(N),{loading:b,trade:t}=q(l==null?void 0:l.uid,e==null?void 0:e.bot_status),u=e.current_price,c=e.commission,{amount:d,coins:m,limitPrice:o,stopLimitPrice:p,slider:i,order:x,clear:g,handleAmount:v,handleCoin:$,handleLimit:A,handleStopLimit:_,handlePercentage:O,handleBuy:T,handleSell:D}=K(r,n,u,e,"limit"),C=()=>{const f={coinId:e==null?void 0:e.coinId,coin:e.coin,coinPair:e.currency,commission:c,limitPrice:o,stopPrice:p,noOfCoins:(["binance","kucoin"].includes(e.bot_status)?d:m)||0,orderType:3,orderPlacedTime:new Date().getTime(),uid:l==null?void 0:l.uid,side:x},L={coinId:e==null?void 0:e.coinId,coin:e.coin,coinPair:e.currency,commission:c,limitPrice:o,stopPrice:p,noOfCoins:m||0,orderType:6,orderPlacedTime:new Date().getTime(),uid:l==null?void 0:l.uid,side:x};x==="buy"&&(d||0)>r||x==="sell"&&(m||0)>n?a({message:"Insufficient balance!",variant:"error"}):x==="buy"&&(d||0)===0||x==="sell"&&(m||0)===0?a({message:"Amount cannot be empty",variant:"error"}):t(x==="buy"?f:L,d||0),g()};return s.jsxs(s.Fragment,{children:[s.jsx(J,{coin:e==null?void 0:e.coin,order:x,handleBuy:T,handleSell:D}),s.jsx(I,{start:"Stop Price",end:e==null?void 0:e.currency,onChange:_,value:p}),s.jsx(I,{start:"Limit Price",end:e==null?void 0:e.currency,onChange:A,value:o}),x==="buy"?s.jsx(I,{start:"Amount",end:e==null?void 0:e.currency,onChange:v,value:d}):s.jsx(I,{start:"Amount",end:e==null?void 0:e.coin,onChange:$,value:m}),s.jsx(Y,{value:i,onChange:O}),s.jsx(I,{start:"Total",end:x==="buy"?e==null?void 0:e.coin:e==null?void 0:e.currency,value:(x==="buy"?m||0:d||0).toFixed(5),disabled:!0,sx:{bgcolor:f=>`${f.palette.error.light}20`,borderRadius:1,"& fieldset":{borderWidth:0}}}),s.jsx(X,{onClick:C,loading:b})]})},_e=({coin:r,trades:n,user:e,openOrderCount:a})=>{const[l,b]=h.useState(0),t=u=>b(u);return s.jsxs(Q,{direction:"column",justifyContent:"flex-start",sx:{height:450},children:[s.jsxs(k,{direction:"row",spacing:1,justifyContent:"space-between",children:[s.jsx(Te,{id:"spotTradeHistoryNavigation",disableRipple:!0,disableElevation:!0,size:"small",sx:{border:u=>`1px solid ${u.palette.mode==="light"?`${u.palette.primary.light}40`:`${u.palette.background.default}50`}`,width:"fit-content",gap:2,"& .MuiButtonGroup-grouped":{borderRadius:"4px !important"}},children:[`Open orders (${a})`,"Order History","Trade History"].map((u,c)=>s.jsx(R,{variant:l===c?"contained":"text",onClick:()=>t(c),sx:{bgcolor:d=>l===c?`${d.palette.primary.main}50`:"background.paper",color:d=>l===c?d.palette.primary.main:"text.primary",fontWeight:"bolder","&:hover":{bgcolor:"inherit"}},children:s.jsx(S,{noWrap:!0,fontSize:"inherit",color:"inherit",children:u})},c))}),s.jsx(R,{size:"small",component:ne,to:`${ie.base}dashboard`,children:"view all"})]}),{0:s.jsx(De,{trades:n==null?void 0:n.filter(({status:u})=>["pending","partiallyCompleted","NEW","open"].includes(u.toLowerCase())),uid:e==null?void 0:e.uid,botStatus:r==null?void 0:r.bot_status}),1:s.jsx(se,{trades:n,type:"orders"}),2:s.jsx(se,{trades:n==null?void 0:n.filter(({status:u})=>["completed","FILLED","done"].includes(u.toLowerCase())),type:"trades"})}[l]]})},De=({trades:r,uid:n,botStatus:e})=>{const{cancel:a}=q(n,e),{contentCopy:l}=Ce(),b=r?r.sort((t,u)=>new Date(+u.orderPlacedTime||u.placedAt).getTime()-new Date(+t.orderPlacedTime||t.placedAt).getTime()).map(t=>{var u,c;return{id:s.jsxs(k,{direction:"row",alignItems:"center",children:[s.jsxs(S,{variant:"inherit",width:100,noWrap:!0,children:[t.tradeId," "]}),s.jsx(ee,{size:"small",onClick:()=>l(t.tradeId),children:s.jsx(Pe,{fontSize:"inherit",color:"primary"})})]}),date:+(t==null?void 0:t.orderPlacedTime)||(t==null?void 0:t.placedAt),pair:(c=(u=E[(t.orderTypeId||t.orderType)-1])==null?void 0:u.toUpperCase())!=null&&c.includes("BUY")?t.baseAsset:t==null?void 0:t.quoteAsset,type:E[((t==null?void 0:t.orderType)||(t==null?void 0:t.orderTypeId))-1].split(" ").slice(0,-1).join(" "),side:s.jsx(S,{variant:"inherit",color:E[((t==null?void 0:t.orderType)||(t==null?void 0:t.orderTypeId))-1].includes("Buy")?"success.main":"error.main",children:E[((t==null?void 0:t.orderType)||(t==null?void 0:t.orderTypeId))-1].split(" ").slice(-1)[0]}),quantity:s.jsx(P,{number:t.noOfCoins,type:"coin",coin:t==null?void 0:t.baseAsset}),price:s.jsx(P,{number:[2,3,5,6].includes((t==null?void 0:t.orderType)||(t==null?void 0:t.orderTypeId))&&t.status!=="done"?t==null?void 0:t.limitPrice:(t==null?void 0:t.marketPrice)||(t==null?void 0:t.filledPrice)||(t==null?void 0:t.limitPrice),type:"coin",coin:t==null?void 0:t.quoteAsset}),amount:s.jsx(P,{number:t.orderAmount,type:"coin",coin:t==null?void 0:t.quoteAsset}),trigger:s.jsx(S,{color:{cancelled:"error.main",canceled:"error.main",dispute:"error.main",pending:"warning.main",open:"warning.main",failed:"warning.main",partiallyPending:"error.main",declined:"error.main",expired:"warning.main",confirm:"success.main",confirmed:"success.main",completed:"success.main",done:"success.main",filled:"success.main"}[t==null?void 0:t.status.toLowerCase()],variant:"inherit",sx:{textTransform:"capitalize"},children:["FILLED","done"].includes(t.status)?"Completed":["NEW","open"].includes(t.status)?"Pending":["CANCELED","canceled"].includes(t.status)?"Cancelled":t.status}),delete:s.jsx(ee,{size:"small",sx:{display:[1,4].includes((t==null?void 0:t.orderType)||(t==null?void 0:t.orderTypeId))?"none":"flex"},onClick:async()=>await a(t.orderId||t.tradeId,t.coinId||t.coin),children:s.jsx(Oe,{color:"error",fontSize:"inherit"})})}}):[];return s.jsx(B,{titles:["Trade ID","Date","Pair","Type","Side","Quantity","Price","Amount","Trigger Conditions",""],data:b})},We=({coin:r,orderBook:n,nativeCurrency:e,nativePrice:a})=>{var o,p,i,x;const[l,b]=h.useState(r==null?void 0:r.current_price),[t,u]=h.useState("success.main"),{coinId:c}=te();h.useEffect(()=>{b(g=>(u(g>((r==null?void 0:r.current_price)||0)?"error.main":"success.main"),r==null?void 0:r.current_price))},[(o=r==null?void 0:r.current_price)==null?void 0:o.toString(),c]);const d=(p=n==null?void 0:n.asks)!=null&&p.length?[...n.asks].slice(0,7).reverse().sort((g,v)=>v[0]-g[0]).map(g=>({price:s.jsx(S,{variant:"inherit",color:"success.main",children:s.jsx(P,{number:g[0],type:"number"})}),size:s.jsx(P,{number:g[1],type:"number"}),total:s.jsx(P,{number:g[0]*g[1],type:"number"})})):[],m=(i=n==null?void 0:n.bids)!=null&&i.length?n.bids.slice(0,7).sort((g,v)=>v[0]-g[0]).map(g=>({price:s.jsx(S,{variant:"inherit",color:"error.main",children:s.jsx(P,{number:g[0],type:"number"})}),size:s.jsx(P,{number:g[1],type:"number"}),total:s.jsx(P,{number:g[0]*g[1],type:"number"})})):[];return s.jsxs(Q,{justifyContent:"flex-start",sx:{width:((x=document==null?void 0:document.getElementById("recentTrades"))==null?void 0:x.clientWidth)||{xs:"100%",md:350},height:440},customTitle:s.jsxs(S,{variant:"subtitle1",fontWeight:"bold",children:["Order Book "," ",s.jsxs(S,{variant:"caption",color:"text.secondary",children:["(",c==null?void 0:c.replace("_","/"),")"]})]}),children:["  ",s.jsx(B,{id:"orderBookSell",titles:[`Price (${r==null?void 0:r.currency})`,"Size","Total"],data:m,height:!0}),s.jsx(B,{id:"orderBookBuy",titles:[`Price (${r==null?void 0:r.currency})`,"Size","Total"],data:d,height:!0}),s.jsxs(S,{variant:"body2",sx:{display:"flex",alignItems:"center"},color:t,children:[s.jsx(P,{number:r.current_price,type:"number"}),t==="success.main"?s.jsx(Ie,{fontSize:"small"}):s.jsx(Se,{fontSize:"small"}),s.jsx(S,{variant:"caption",color:"text.secondary",children:s.jsx(P,{number:r.current_price*a,type:e})})]})]})},ke=({coin:r,recentTrade:n})=>{const e=n?n.slice(0,15).map(a=>({price:s.jsx(S,{variant:"inherit",color:a!=null&&a.isBuyerMaker?"success.main":"error.main",children:s.jsx(P,{number:a.price,type:"number"})}),amount:s.jsx(P,{number:a==null?void 0:a.qty,type:"number"}),date:a.time})):[];return s.jsx(Q,{id:"recentTrades",justifyContent:"flex-start",sx:{width:"100%",height:440},customTitle:s.jsx(S,{variant:"subtitle1",fontWeight:"bold",children:"Recent Trade"}),children:s.jsx(B,{titles:[`Price (${r==null?void 0:r.currency})`,`Amount (${r==null?void 0:r.coin})`,"Time"],data:e})})},Fe=({amountBalance:r,coinList:n,user:e,CoinBalance:a,balanceLoading:l,nativePrice:b,nativeCurrency:t,prices:u})=>{const{coin:c,filteredCoins:d,coinInfo:m,recentTrade:o,orderBook:p,coinId:i}=ge(n,u);console.log("coinId : ",i);const{trades:x,openOrderCount:g}=je(i,e==null?void 0:e.uid);return console.log(c,m,"user Data"),!c||!e||(!(m!=null&&m.current_price)||p===void 0||o===void 0)&&!m.notFound?s.jsx(ae,{}):c!=null&&c.active?s.jsx(s.Fragment,{children:s.jsxs(z,{container:!0,spacing:2,sx:{px:{xs:0,sm:1},pb:2},children:[s.jsxs(z,{item:!0,container:!0,xs:12,lg:9,spacing:2,sx:{height:"max-content"},children:[s.jsx(z,{item:!0,xs:12,children:s.jsx(ye,{coin:{...c,...m},filteredCoins:d,nativeCurrency:t,nativePrice:b})}),s.jsx(z,{item:!0,xs:!0,sx:{maxWidth:{xs:"100%",md:"fit-content"}},children:s.jsx(We,{coin:{...c,...m},orderBook:p,nativeCurrency:t,nativePrice:b})}),s.jsx(z,{item:!0,xs:!0,sx:{width:"100%",minHeight:"100%"},children:s.jsx(be,{...c,...m})})]}),s.jsx(z,{item:!0,xs:12,md:3,children:s.jsx(Le,{coin:{...c,...m},CoinBalance:a,AmountBalance:r,loading:l})}),s.jsx(z,{item:!0,xs:12,lg:9,children:s.jsx(_e,{user:e,trades:x,openOrderCount:g,coin:{...c,...m}})}),s.jsx(z,{item:!0,xs:12,md:3,children:s.jsx(ke,{coin:{...c,...m},recentTrade:o})})]})}):s.jsx(le,{to:".."})},Ge=()=>{var c,d,m;const{coinList:r,user:n,coinWalletDetails:e,amountWalletDetails:a,balanceLoading:l,nativePrice:b,nativeCurrency:t,prices:u}=h.useContext(N);return r===void 0?s.jsx(ae,{}):fe([{path:"/",element:s.jsx(le,{to:(m=(d=(c=r==null?void 0:r.filter(({active:o})=>!!o))==null?void 0:c[0])==null?void 0:d.coinId)==null?void 0:m.replace("/","_")})},{path:":coinId",element:s.jsx(Fe,{coinList:r,user:n,CoinBalance:e,amountBalance:a,balanceLoading:l,nativePrice:b,nativeCurrency:t,prices:u})}])};export{Ge as default};

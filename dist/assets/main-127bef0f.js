import{r as L,a as z,g as U,s as I,_ as g,u as T,b as _,j as t,c as D,d as A,V as se,bv as ve,ao as ie,R as B,U as le,H as ye,K as ge,bw as q,bx as oe,by as Se,N as V,m as ne,Q as ce,aD as de,aC as je,B as J,A as we,f as X,T as C,aL as pe,S as k,ax as me,bz as Le,l as E,L as ue,t as O,G as w,aR as xe,bs as ae,aE as W,P as Pe,q as he,p as $e,aM as Ce,aO as Re,aP as Ie,aQ as Me,O as Ne}from"./index-7c4d6238.js";import{u as Be}from"./use-kyc-13387bf9.js";import{F as Fe}from"./full-viwer-80a26e4c.js";import{S as be}from"./select-field-17787c0d.js";import{I as ke}from"./intro-a059d009.js";const De=L.createContext({}),H=De,ze=L.createContext({}),K=ze;function Ue(e){return z("MuiStep",e)}U("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const Te=["active","children","className","component","completed","disabled","expanded","index","last"],_e=e=>{const{classes:n,orientation:a,alternativeLabel:o,completed:r}=e;return A({root:["root",a,o&&"alternativeLabel",r&&"completed"]},Ue,n)},Ae=I("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.orientation],a.alternativeLabel&&n.alternativeLabel,a.completed&&n.completed]}})(({ownerState:e})=>g({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),Ve=L.forwardRef(function(n,a){const o=T({props:n,name:"MuiStep"}),{active:r,children:l,className:c,component:d="div",completed:p,disabled:m,expanded:b=!1,index:i,last:f}=o,P=_(o,Te),{activeStep:s,connector:u,alternativeLabel:S,orientation:v,nonLinear:h}=L.useContext(H);let[y=!1,x=!1,j=!1]=[r,p,m];s===i?y=r!==void 0?r:!0:!h&&s>i?x=p!==void 0?p:!0:!h&&s<i&&(j=m!==void 0?m:!0);const R=L.useMemo(()=>({index:i,last:f,expanded:b,icon:i+1,active:y,completed:x,disabled:j}),[i,f,b,y,x,j]),$=g({},o,{active:y,orientation:v,alternativeLabel:S,completed:x,disabled:j,expanded:b,component:d}),M=_e($),N=t.jsxs(Ae,g({as:d,className:D(M.root,c),ref:a,ownerState:$},P,{children:[u&&S&&i!==0?u:null,l]}));return t.jsx(K.Provider,{value:R,children:u&&!S&&i!==0?t.jsxs(L.Fragment,{children:[u,N]}):N})}),We=Ve,Xe=se(t.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),Ee=se(t.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Oe(e){return z("MuiStepIcon",e)}const He=U("MuiStepIcon",["root","active","completed","error","text"]),G=He;var re;const qe=["active","className","completed","error","icon"],Ge=e=>{const{classes:n,active:a,completed:o,error:r}=e;return A({root:["root",a&&"active",o&&"completed",r&&"error"],text:["text"]},Oe,n)},Q=I(ve,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,n)=>n.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${G.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${G.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${G.error}`]:{color:(e.vars||e).palette.error.main}})),Qe=I("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,n)=>n.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),Je=L.forwardRef(function(n,a){const o=T({props:n,name:"MuiStepIcon"}),{active:r=!1,className:l,completed:c=!1,error:d=!1,icon:p}=o,m=_(o,qe),b=g({},o,{active:r,completed:c,error:d}),i=Ge(b);if(typeof p=="number"||typeof p=="string"){const f=D(l,i.root);return d?t.jsx(Q,g({as:Ee,className:f,ref:a,ownerState:b},m)):c?t.jsx(Q,g({as:Xe,className:f,ref:a,ownerState:b},m)):t.jsxs(Q,g({className:f,ref:a,ownerState:b},m,{children:[re||(re=t.jsx("circle",{cx:"12",cy:"12",r:"12"})),t.jsx(Qe,{className:i.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:b,children:p})]}))}return p}),Ze=Je;function Ke(e){return z("MuiStepLabel",e)}const Ye=U("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),F=Ye,et=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],tt=e=>{const{classes:n,orientation:a,active:o,completed:r,error:l,disabled:c,alternativeLabel:d}=e;return A({root:["root",a,l&&"error",c&&"disabled",d&&"alternativeLabel"],label:["label",o&&"active",r&&"completed",l&&"error",c&&"disabled",d&&"alternativeLabel"],iconContainer:["iconContainer",o&&"active",r&&"completed",l&&"error",c&&"disabled",d&&"alternativeLabel"],labelContainer:["labelContainer",d&&"alternativeLabel"]},Ke,n)},ot=I("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.orientation]]}})(({ownerState:e})=>g({display:"flex",alignItems:"center",[`&.${F.alternativeLabel}`]:{flexDirection:"column"},[`&.${F.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),nt=I("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,n)=>n.label})(({theme:e})=>g({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${F.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${F.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${F.alternativeLabel}`]:{marginTop:16},[`&.${F.error}`]:{color:(e.vars||e).palette.error.main}})),at=I("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,n)=>n.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${F.alternativeLabel}`]:{paddingRight:0}})),rt=I("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,n)=>n.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${F.alternativeLabel}`]:{textAlign:"center"}})),fe=L.forwardRef(function(n,a){var o;const r=T({props:n,name:"MuiStepLabel"}),{children:l,className:c,componentsProps:d={},error:p=!1,icon:m,optional:b,slotProps:i={},StepIconComponent:f,StepIconProps:P}=r,s=_(r,et),{alternativeLabel:u,orientation:S}=L.useContext(H),{active:v,disabled:h,completed:y,icon:x}=L.useContext(K),j=m||x;let R=f;j&&!R&&(R=Ze);const $=g({},r,{active:v,alternativeLabel:u,completed:y,disabled:h,error:p,orientation:S}),M=tt($),N=(o=i.label)!=null?o:d.label;return t.jsxs(ot,g({className:D(M.root,c),ref:a,ownerState:$},s,{children:[j||R?t.jsx(at,{className:M.iconContainer,ownerState:$,children:t.jsx(R,g({completed:y,active:v,error:p,icon:j},P))}):null,t.jsxs(rt,{className:M.labelContainer,ownerState:$,children:[l?t.jsx(nt,g({ownerState:$},N,{className:D(M.label,N==null?void 0:N.className),children:l})):null,b]})]}))});fe.muiName="StepLabel";const st=fe;function it(e){return z("MuiStepConnector",e)}U("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const lt=["className"],ct=e=>{const{classes:n,orientation:a,alternativeLabel:o,active:r,completed:l,disabled:c}=e,d={root:["root",a,o&&"alternativeLabel",r&&"active",l&&"completed",c&&"disabled"],line:["line",`line${ie(a)}`]};return A(d,it,n)},dt=I("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.orientation],a.alternativeLabel&&n.alternativeLabel,a.completed&&n.completed]}})(({ownerState:e})=>g({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:8+4,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),pt=I("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.line,n[`line${ie(a.orientation)}`]]}})(({ownerState:e,theme:n})=>{const a=n.palette.mode==="light"?n.palette.grey[400]:n.palette.grey[600];return g({display:"block",borderColor:n.vars?n.vars.palette.StepConnector.border:a},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),mt=L.forwardRef(function(n,a){const o=T({props:n,name:"MuiStepConnector"}),{className:r}=o,l=_(o,lt),{alternativeLabel:c,orientation:d="horizontal"}=L.useContext(H),{active:p,disabled:m,completed:b}=L.useContext(K),i=g({},o,{alternativeLabel:c,orientation:d,active:p,completed:b,disabled:m}),f=ct(i);return t.jsx(dt,g({className:D(f.root,r),ref:a,ownerState:i},l,{children:t.jsx(pt,{className:f.line,ownerState:i})}))}),ut=mt;function xt(e){return z("MuiStepper",e)}U("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const ht=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],bt=e=>{const{orientation:n,nonLinear:a,alternativeLabel:o,classes:r}=e;return A({root:["root",n,a&&"nonLinear",o&&"alternativeLabel"]},xt,r)},ft=I("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.orientation],a.alternativeLabel&&n.alternativeLabel,a.nonLinear&&n.nonLinear]}})(({ownerState:e})=>g({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),vt=t.jsx(ut,{}),yt=L.forwardRef(function(n,a){const o=T({props:n,name:"MuiStepper"}),{activeStep:r=0,alternativeLabel:l=!1,children:c,className:d,component:p="div",connector:m=vt,nonLinear:b=!1,orientation:i="horizontal"}=o,f=_(o,ht),P=g({},o,{nonLinear:b,alternativeLabel:l,orientation:i,component:p}),s=bt(P),u=L.Children.toArray(c).filter(Boolean),S=u.map((h,y)=>L.cloneElement(h,g({index:y,last:y+1===u.length},h.props))),v=L.useMemo(()=>({activeStep:r,alternativeLabel:l,connector:m,nonLinear:b,orientation:i}),[r,l,m,b,i]);return t.jsx(H.Provider,{value:v,children:t.jsx(ft,g({as:p,ownerState:P,className:D(s.root,d),ref:a},f,{children:S}))})}),gt=yt,St=()=>{const[e,n]=B.useState(0),{user:a,update:o}=B.useContext(le),r=jt,l=ce,c=ye(),d=ge(),{loading:p,userKYC:m}=Be(!1);B.useEffect(()=>{var s,u;return n((s=m==null?void 0:m.userKyc)!=null&&s.addressProofPhoto&&!((u=m==null?void 0:m.userKyc)!=null&&u.reason)?2:0)},[p]);const b=B.useMemo(()=>({0:q,1:q.concat(oe),2:q.concat(Se).concat(oe)})[e],[e]);return{activeStep:e,loading:p,userKYC:m,validation:b,update:async(s,{setSubmitting:u,resetForm:S})=>{var y;const v={firstName:s.firstName,lastName:s.lastName,phoneNumber:s.phoneNumber,password:"",profileImage:(y=s==null?void 0:s.profileImage)!=null&&y.includes("base64")?r(s.profileImage,`${s.firstName}_${s.lastName}_profile`):"",removeProfileImage:!(s!=null&&s.profileImage),signature:a==null?void 0:a.signature,metaMaskWallet:a==null?void 0:a.metaMaskWallet};var h=new FormData;Object.entries(v).map(([x,j])=>{console.log("Phone no validation",j),j!=null&&h.append(x,j)}),await V("editProfile",h).then(x=>{x.error&&l({message:x.message,variant:"error"}),o(),c(`${ne.base}profile`)}).finally(()=>{u(!1),S()})},changePassword:async(s,{setSubmitting:u,resetForm:S})=>{await V("checkPassword",{password:s.currentPassword}).then(async v=>{if(v.error)l({message:v.message,variant:"error"});else{const y={...a,password:s.newPassword,profileImage:"",removeProfileImage:!1};var h=new FormData;Object.entries(y).map(([x,j])=>h.append(x,j)),await V("editProfile",h).then(x=>{o(),c(`${ne.base}profile`)}).finally(()=>{u(!1),S()})}}).finally(()=>{u(!1),S()})},submitKyc:async(s,{setSubmitting:u})=>{if(e===2){const v={...s,documentPhotoFront:r(s.documentPhotoFront,`${s.documentType}_front`),documentPhotoBack:r(s.documentPhotoBack,`${s.documentType}_back`),userPicture:"",addressProofPhoto:r(s.addressProofPhoto,`${s.addressDocumentType}_address`),isResubmitted:0,reason:"",type:s!=null&&s.reason?"":"NEW"};var S=new FormData;Object.entries(v).map(([h,y])=>S.append(h,y)),await V("updateKYC",S).then(h=>{h!=null&&h.error?l({message:h.message,variant:"error"}):c("complete")}),d.invalidateQueries("userKYC")}n(v=>v>2?v:v+1),u(!1)},setActiveStep:n}},jt=(e,n)=>{for(var a=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(a.length),l=new DataView(r),c=0;c<a.length;c++)l.setUint8(c,a.charCodeAt(c));const d=new Blob([r],{type:o});return new File([d],`${n}.${d.type.split("/").slice(-1)[0]}`,{type:d.type,lastModified:new Date().getTime()})},wt=e=>new Promise((n,a)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>n(o.result),o.onerror=r=>a(r)}),Z=({name:e,sx:n,label:a,disabled:o,initName:r,avatar:l})=>{var h,y;const c=ce,[d,p]=B.useState(!1),{setFieldValue:m,setFieldError:b,values:i,errors:f,touched:P,isSubmitting:s}=de(),u=!!(f[e]&&P[e]),S=B.useCallback(async x=>{var j,R,$,M,N,Y,ee,te;/(image\/*|application\/pdf)/.test((($=(R=(j=x.target)==null?void 0:j.files)==null?void 0:R[0])==null?void 0:$.type)||"")?(((Y=(N=(M=x.target)==null?void 0:M.files)==null?void 0:N[0])==null?void 0:Y.size)||0)>5e6?c({message:"Upload limit maximum 5MB allowed",variant:"error"}):m(e,await wt((te=(ee=x.target)==null?void 0:ee.files)==null?void 0:te[0])):c({message:"Only .jpg, .jpeg or .pdf files allowed",variant:"error"})},[e]),v=()=>p(!d);return t.jsx(je,{error:u,label:a,hide:!1,children:t.jsxs(J,{sx:{width:"100%",position:"relative"},onClick:o?v:void 0,children:[t.jsx("input",{disabled:o||s,hidden:!0,accept:"image/*,application/pdf",id:`browse${e}`,type:"file",name:e,onChange:o?void 0:S}),t.jsx("label",{htmlFor:`browse${e}`,style:{display:"inline-block",width:"inherit"},children:l?t.jsx(we,{src:i[e]?(h=i[e])!=null&&h.includes("base64")?i[e]:`https://api.sun100.io${i[e]}`:`https://avatars.dicebear.com/api/initials/${r}.svg`,sx:{cursor:"pointer",textAlign:"center",objectFit:"cover",boxShadow:i[e]&&"0px 0px 10px #00000050",border:x=>u?`1px solid ${x.palette.error.main}`:i[e]?void 0:`1px solid ${x.palette.grey[400]}`,...n}}):t.jsx(X,{component:"object",id:e,data:i[e]?i[e].includes("base64")?i[e]:`https://api.sun100.io${i[e]}#toolbar=0`:"/images/upload.png",sx:{borderRadius:1,p:i[e]?0:10,objectFit:i[e]?"cover":"contain",border:x=>u?`1px solid ${x.palette.error.main}`:i[e]?void 0:`1px solid ${x.palette.primary.main}`,...n}})}),u&&t.jsx(C,{color:"error",variant:"caption",children:f[e]}),t.jsx(J,{sx:{display:o&&!l?"block":"none",boxShadow:"0 0 100px rgba(0, 0, 0, 0.26) inset",zIndex:1,position:"absolute",height:"100%",width:"100%",top:0,borderRadius:1}}),d&&t.jsx(Fe,{onClick:v,src:i[e]?(y=i[e])!=null&&y.includes("base64")?i[e]:`https://api.sun100.io${i[e]}`:`https://avatars.dicebear.com/api/initials/${r}.svg`})]})})},Lt="/assets/Frame-10c36cd6.png",Tt=()=>t.jsx(pe,{fullScreen:!1,icon:!0,children:t.jsxs(k,{component:me,spacing:3,alignItems:"center",children:[t.jsx(X,{component:"img",src:Le,sx:{height:"auto",width:50}}),t.jsx(C,{variant:"h5",textAlign:"center",children:"KYC Verification required"}),t.jsx(C,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Your account is not verified. Please verify your account"}),t.jsx(E,{variant:"contained",component:ue,to:"..",children:"Verify Now"})]})}),_t=()=>t.jsx(pe,{fullScreen:!1,children:t.jsxs(k,{component:me,spacing:3,alignItems:"center",children:[t.jsx(X,{component:"img",src:"/images/Successmark.png",sx:{height:150,width:150}}),t.jsx(C,{variant:"h5",textAlign:"center",children:"KYC Submission Completed"}),t.jsx(C,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Thanks for submitting your document. We’ll verify it and complete your KYC as soon as possible."}),t.jsx(E,{variant:"contained",sx:{bgcolor:"primary.main",p:1.25,borderRadius:2.5},component:ue,to:"/profile/kyc",children:"Back to KYC"})]})}),Pt=({disabled:e})=>t.jsx(O,{sx:{p:0},id:"contactDetail",children:t.jsxs(w,{container:!0,spacing:1,sx:{pt:2},children:[t.jsx(w,{item:!0,xs:12,children:t.jsx(xe,{size:"small",name:"email",type:"text",placeholder:"Joe@gmail.com",label:"Email",disabled:!0})}),t.jsx(w,{item:!0,xs:12,md:6,children:t.jsx(ae,{size:"small",name:"primaryPhoneNumber",type:"text",label:"Contact number",disabled:e})}),t.jsx(w,{item:!0,xs:12,md:6,children:t.jsx(ae,{size:"small",name:"secondaryPhoneNumber",type:"text",label:"Secondary phone number",disabled:e})})]})}),$t=({disabled:e})=>t.jsx(O,{sx:{p:0},id:"documentDetail",children:t.jsxs(w,{container:!0,spacing:3,sx:{pt:2},children:[t.jsx(w,{item:!0,xs:12,md:6,children:t.jsxs(be,{size:"small",name:"documentType",label:"Type of document",defaultValue:0,disabled:e,children:[t.jsx(W,{disabled:!0,value:0,children:t.jsx(C,{variant:"body1",color:"text.secondary",children:"Choose document type"})}),["Passport","Driving License","National ID"].map((n,a)=>t.jsx(W,{value:n,children:n},a))]})}),t.jsx(w,{item:!0,xs:12,md:6,children:t.jsx(xe,{size:"small",type:"text",name:"documentNumber",label:"Selected document number",placeholder:"XXXX XXXX XXXX XXXX",disabled:e})}),t.jsx(w,{item:!0,xs:12,md:6,children:t.jsx(Z,{name:"documentPhotoFront",sx:{height:200,width:"inherit"},label:"Upload document (FRONT)",disabled:e})}),t.jsx(w,{item:!0,xs:12,md:6,children:t.jsx(Z,{name:"documentPhotoBack",sx:{height:200,width:"inherit"},label:"Upload document (BACK)",disabled:e})})]})}),Ct=({stepShow:e,setStepShow:n})=>t.jsx(Pe,{component:k,spacing:3,sx:{borderRadius:4,p:4},alignItems:"start",children:t.jsxs(he,{maxWidth:"sm",component:k,spacing:2,children:[t.jsx(C,{variant:"h5",sx:{color:"#000"},children:"KYC Registration"}),t.jsx(C,{variant:"body1",sx:{color:"#000"},children:"Complete KYC registration steps to start Buy and Sell your Assets."}),t.jsx(k,{width:"100%",height:{xs:"50%",md:"50%"},display:"flex",justifyContent:"center",alignItems:"center",children:t.jsx(X,{component:"img",src:Lt,sx:{width:"60%"}})}),t.jsx(E,{fullWidth:!0,onClick:()=>n(!1),variant:"contained",sx:{bgcolor:"primary.main",borderRadius:2.5,padding:1.25,"&:hover":{bgcolor:"primary.main",boxShadow:"none"}},children:"Start verify"})]})}),Rt=({disabled:e})=>t.jsx(O,{id:"addressDetail",sx:{p:0},children:t.jsxs(w,{container:!0,spacing:1,sx:{pt:2},children:[t.jsx(w,{item:!0,xs:12,children:t.jsxs(be,{size:"small",name:"addressDocumentType",label:"Type of document",defaultValue:0,disabled:e,children:[t.jsx(W,{disabled:!0,value:0,children:t.jsx(C,{variant:"body1",color:"text.secondary",children:"Choose document type"})}),["Bank Statement","Credit Card Statement","Utility Bill","Municipality Registration"].map((n,a)=>t.jsx(W,{value:n,children:n},a))]})}),t.jsx(w,{item:!0,xs:12,children:t.jsx(Z,{name:"addressProofPhoto",sx:{height:200,width:"inherit"},label:"Upload document",disabled:e})})]})}),It=["Contact Details","Residential Address","Document Details"],Mt=({activeStep:e,idVerify:n,addressVerify:a,submitted:o,setActiveStep:r})=>t.jsx(O,{id:"kycSubmit",justifyContent:"center",sx:{},children:t.jsx(J,{sx:{width:"100%"},children:t.jsx(gt,{activeStep:e,alternativeLabel:!0,orientation:"horizontal",children:It.map((l,c)=>t.jsx(We,{sx:{"& .MuiStepLabel-root .Mui-completed":{color:"primary.main"},"& .MuiStepLabel-label.Mui-completed.MuiStepLabel-alternativeLabel":{color:"primary.main"},"& .MuiStepLabel-root .Mui-active":{color:"primary.main"},"& .MuiStepLabel-root .Mui-active .MuiStepIcon-text":{fill:"common.white"}},children:t.jsx(st,{onClick:()=>r(c),sx:{display:"flex",flexDirection:"column"},children:t.jsx(C,{variant:"subtitle2",children:l})})},c))})})}),Nt=e=>{const n=document.getElementById(e);n&&(n.focus(),n.scrollIntoView({block:"center"}))},At=()=>{var m,b,i;const{user:e}=B.useContext(le),{activeStep:n,loading:a,userKYC:o,validation:r,submitKyc:l,setActiveStep:c}=St(),[d,p]=B.useState(!0);return L.useEffect(()=>{var f,P,s;(f=o==null?void 0:o.userKyc)!=null&&f.idProof_verified&&((P=o==null?void 0:o.userKyc)!=null&&P.addressProof_verified)||(s=o==null?void 0:o.userKyc)!=null&&s.addressProofPhoto?p(!1):p(!0)},[o==null?void 0:o.userKyc]),a?t.jsx($e,{}):t.jsx(Ce,{initialValues:o!=null&&o.userKyc&&!((m=o==null?void 0:o.userKyc)!=null&&m.reason)?{...o.userKyc,documentType:((b=o.userKyc)==null?void 0:b.documentType)||"0",addressDocumentType:((i=o.userKyc)==null?void 0:i.addressDocumentType)||"0"}:{email:e==null?void 0:e.email,primaryPhoneNumber:"",secondaryPhoneNumber:"",documentType:"0",documentNumber:"",documentPhotoFront:"",documentPhotoBack:"",userPicture:"",addressDocumentType:"0",addressProofPhoto:""},validationSchema:r,onSubmit:l,children:()=>{var f,P,s,u,S,v,h,y,x,j,R,$;return t.jsxs(he,{component:Re,maxWidth:"lg","aria-disabled":!0,sx:{px:{xs:0,sm:0}},children:[t.jsxs(w,{container:!0,children:[d&&t.jsx(w,{item:!0,xs:12,children:t.jsx(Ct,{stepShow:d,setStepShow:p})}),(f=o==null?void 0:o.userKyc)!=null&&f.reason?t.jsx(w,{item:!0,xs:12,children:t.jsxs(k,{direction:"row",alignItems:"center",component:Ie,severity:"error",sx:{borderRadius:2},children:[t.jsx(C,{variant:"h6",children:"KYC Registration Failed"}),t.jsx(C,{variant:"body1",children:(P=o==null?void 0:o.userKyc)==null?void 0:P.reason})]})}):null,!d&&t.jsxs(w,{item:!0,xs:12,container:!0,children:[t.jsx(k,{direction:"row",alignItems:"center",gap:2,children:t.jsx(C,{variant:"h5",fontSize:{xs:"18px",md:"24px"},fontWeight:600,py:2,children:"KYC Registration"})}),t.jsx(w,{item:!0,xs:12,md:12,children:t.jsx(Mt,{activeStep:n,submitted:!((s=o==null?void 0:o.userKyc)!=null&&s.reason)&&!!((u=o==null?void 0:o.userKyc)!=null&&u.addressProofPhoto),idVerify:(S=o==null?void 0:o.userKyc)==null?void 0:S.idProof_verified,addressVerify:(v=o==null?void 0:o.userKyc)==null?void 0:v.addressProof_verified,setActiveStep:c})}),t.jsx(Bt,{userKYC:o,activeStep:n}),t.jsx(w,{item:!0,xs:12,mt:1,container:!0,justifyContent:"center",children:t.jsx(k,{width:"95%",children:(h=o==null?void 0:o.userKyc)!=null&&h.idProof_verified&&((y=o==null?void 0:o.userKyc)!=null&&y.addressProof_verified)?t.jsx(E,{color:"success",variant:"contained",fullWidth:!0,disableRipple:!0,disableElevation:!0,sx:{borderRadius:2.5,padding:1.25},children:"Verified"}):t.jsx(Me,{type:"submit",fullWidth:!0,variant:"contained",sx:{bgcolor:"primary.main",borderRadius:2.5,padding:1.25,"&.Mui-disabled":{bgcolor:"orange",color:"white"},"&:hover":{bgcolor:"primary.main",boxShadow:"none"}},disabled:!((x=o==null?void 0:o.userKyc)!=null&&x.reason)&&!!((j=o==null?void 0:o.userKyc)!=null&&j.addressProofPhoto),children:!((R=o==null?void 0:o.userKyc)!=null&&R.reason)&&(($=o==null?void 0:o.userKyc)!=null&&$.addressProofPhoto)?"KYC documents review is in progress":n===2?"Submit":"Next"})})})]})]}),t.jsx(Ne,{})]})}})},Bt=({userKYC:e,activeStep:n})=>{var r,l,c,d,p,m;const{errors:a,isSubmitting:o}=de();return B.useEffect(()=>{Object.entries(a).forEach(([b,i],f)=>{f||Nt(b)})},[o]),console.log("===================================="),console.log(n>=2),console.log("===================================="),t.jsxs(w,{item:!0,xs:12,md:12,container:!0,children:[t.jsx(ke,{name:"kyc"}),n===0&&t.jsx(t.Fragment,{children:t.jsx(Pt,{disabled:!!(!((r=e==null?void 0:e.userKyc)!=null&&r.reason)&&((l=e==null?void 0:e.userKyc)!=null&&l.secondaryPhoneNumber))})}),n===1&&t.jsx(t.Fragment,{children:t.jsx(Rt,{disabled:!!(!((c=e==null?void 0:e.userKyc)!=null&&c.reason)&&((d=e==null?void 0:e.userKyc)!=null&&d.addressProofPhoto))})}),n===2&&t.jsx(t.Fragment,{children:t.jsx($t,{disabled:!((p=e==null?void 0:e.userKyc)!=null&&p.reason)&&!!((m=e==null?void 0:e.userKyc)!=null&&m.documentPhotoBack)})})]})};export{Z as I,_t as K,At as M,Tt as a,St as u};

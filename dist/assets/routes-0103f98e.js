import{b8 as re,V as S,j as e,aD as q,H as E,I as U,aL as ce,S as x,ax as de,f as X,bo as me,T as m,l as _,L as N,a4 as ee,q as P,aM as R,bp as xe,aO as O,t as w,aR as h,aQ as G,m as $,bq as pe,G as i,O as te,br as he,aE as je,aF as be,bs as F,o as W,n as ge,x as fe,R as T,A as Y,W as C,$ as D,b7 as ue,D as ne,B as V,F as K,p as se,aV as ye,U as ae,aW as $e,aG as Z,au as _e,r as A,h as ke,bt as Ce,a5 as we}from"./index-7c4d6238.js";import{P as H,b as ve,S as J,a as Q,u as ze}from"./StarBorder-c0a089b3.js";import{M as Ne,V as Pe}from"./main-41c63920.js";import{u as ie,I as Ie,M as Te,K as Se,a as Fe}from"./main-127bef0f.js";import{S as Me}from"./select-field-17787c0d.js";import{A as Ae}from"./ArrowBack-bb9828fa.js";import"./use-utils-2db32e46.js";import"./auth-e4923acc.js";import"./use-kyc-13387bf9.js";import"./full-viwer-80a26e4c.js";import"./intro-a059d009.js";const Le=()=>{const{data:t,isFetching:d}=re(["sessionHistory",localStorage.getItem("accessToken")||""],"sessionHistory");return{sessions:t,loading:d}},De=S([e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M7.35 18.5C8.66 17.56 10.26 17 12 17s3.34.56 4.65 1.5c-1.31.94-2.91 1.5-4.65 1.5s-3.34-.56-4.65-1.5m10.79-1.38C16.45 15.8 14.32 15 12 15s-4.45.8-6.14 2.12C4.7 15.73 4 13.95 4 12c0-4.42 3.58-8 8-8s8 3.58 8 8c0 1.95-.7 3.73-1.86 5.12"},"0"),e.jsx("path",{d:"M12 6c-1.93 0-3.5 1.57-3.5 3.5S10.07 13 12 13s3.5-1.57 3.5-3.5S13.93 6 12 6m0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11"},"1")],"AccountCircleOutlined"),Ee=S(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),L=S(e.jsx("path",{d:"M18.41 5.8 17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74 2.63-2.63c.79-.78.79-2.05 0-2.83M6.21 18H5v-1.21l8.66-8.66 1.21 1.21zM11 20l4-4h6v4z"}),"DriveFileRenameOutline"),Re=S(e.jsx("path",{d:"M4 7h16v2H4zm0 6h16v-2H4zm0 4h7v-2H4zm0 4h7v-2H4zm11.41-2.83L14 16.75l-1.41 1.41L15.41 21 20 16.42 18.58 15zM4 3v2h16V3z"}),"GradingOutlined"),Oe=S(e.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.25 2.52.77-1.28-3.52-2.09V8z"}),"HistoryOutlined"),Be=S(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm7 10c0 4.52-2.98 8.69-7 9.93-4.02-1.24-7-5.41-7-9.93V6.3l7-3.11 7 3.11zm-11.59.59L6 13l4 4 8-8-1.41-1.42L10 14.17z"}),"VerifiedUserOutlined"),We=()=>{const{setFieldValue:t}=q(),d=E(),{state:a}=U(),o=()=>{t("profileImage",""),d("..",{state:{...a,removeProfile:!0}})};return a?e.jsx(ce,{fullScreen:!1,icon:!0,children:e.jsxs(x,{component:de,spacing:3,alignItems:"center",sx:{p:7},children:[e.jsx(X,{component:"img",src:me,sx:{height:"auto",width:50}}),e.jsx(m,{variant:"h5",textAlign:"center",children:"Delete Photo"}),e.jsx(m,{variant:"body2",color:"text.secondary",textAlign:"center",children:"Are you sure you want to delete the profile picture?"}),e.jsxs(x,{direction:"row",spacing:2,children:[e.jsx(_,{variant:"contained",onClick:o,children:e.jsx(m,{variant:"h6",children:"Yes, Delete"})}),e.jsx(_,{variant:"outlined",color:"secondary",component:N,to:"..",children:e.jsx(m,{variant:"h6",children:"Discard"})})]})]})}):e.jsx(ee,{to:".."})},Ve=()=>{const{changePassword:t}=ie();return e.jsx(P,{maxWidth:"md",sx:{px:{xs:0,sm:1}},children:e.jsx(R,{initialValues:{currentPassword:"",newPassword:"",confirmPassword:""},validationSchema:xe,onSubmit:t,children:e.jsxs(O,{children:[e.jsx(w,{direction:"column",justifyContent:"start",spacing:2,sx:{height:"100%"},children:e.jsxs(P,{maxWidth:"xs",sx:{ml:0},component:x,spacing:2,children:[e.jsx(m,{variant:"h5",children:"Change password"}),e.jsx(h,{label:"Enter Current Password",name:"currentPassword",type:"password",size:"small"}),e.jsx(h,{label:"Create New Password",name:"newPassword",type:"password",size:"small"}),e.jsx(h,{label:"Confirm New Password",name:"confirmPassword",type:"password",size:"small"})]})}),e.jsxs(x,{direction:"row",spacing:2,sx:{py:3,px:1},children:[e.jsx(G,{sx:{height:"fit-content",width:"max-content"},children:"Update Password"}),e.jsx(_,{variant:"outlined",color:"secondary",component:N,to:`${$.base}profile/accountsettings`,children:"Discard"})]})]})})})},He=({user:t})=>{const{update:d}=ie();return e.jsx(P,{maxWidth:"md",sx:{p:{xs:0,sm:0}},children:e.jsx(R,{initialValues:{firstName:t==null?void 0:t.firstName,lastName:t==null?void 0:t.lastName,email:t==null?void 0:t.email,phoneNumber:t==null?void 0:t.phoneNumber,profileImage:t==null?void 0:t.profileImage,password:"........"},validationSchema:pe,onSubmit:d,children:({isSubmitting:a})=>e.jsxs(O,{children:[e.jsxs(x,{children:[e.jsxs(w,{direction:"column",justifyContent:"start",spacing:2,sx:{height:"100%"},children:[e.jsx(m,{variant:"h5",fontSize:{xs:"18px",md:"24px"},fontWeight:600,children:"Edit Personal Details"}),e.jsx(oe,{disabled:a})]}),e.jsx(i,{item:!0,xs:12,sx:{p:0},children:e.jsxs(x,{alignItems:"center",justifyContent:"space-between",direction:"row",children:[e.jsx(_,{sx:{maxWidth:"50%"},variant:"outlined",component:N,to:`${$.base}profile/accountsettings`,children:"Discard"}),e.jsx(G,{sx:{maxWidth:"50%"},children:"Save Changes"})]})})]}),e.jsx(te,{})]})})})},Ue=({updatePayment:t,payment:d})=>e.jsx(P,{maxWidth:"md",sx:{p:{xs:0,sm:0}},children:e.jsx(le,{variant:"edit",updatePayment:t,payment:d})}),le=({variant:t,updatePayment:d,payment:a})=>{const o=E(),s=async({paymentType:l,...r},{setSubmitting:b})=>{let j=l.toLowerCase().replaceAll(" ","_"),f=Object.assign({},...Object.entries(r).filter(([u])=>u.includes(j)).map(([u,z])=>({[u]:z})));await d(j,f),o(`${$.base}profile`),b(!1)};return e.jsxs(w,{id:"paymentDetails",direction:"column",justifyContent:"start",sx:{borderRadius:0,padding:0},children:[e.jsxs(x,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,pb:1,children:[e.jsx(m,{variant:"h5",fontSize:{xs:"18px",md:"24px"},fontWeight:600,children:"Payment Details"}),e.jsx(_,{id:"editPaymentDetail",endIcon:e.jsx(L,{}),color:"secondary",variant:"outlined",onClick:()=>o(`${$.base}profile/payment-edit`),sx:{display:t==="edit"?"none":"flex",border:"none"},children:"Edit"})]}),e.jsx(R,{initialValues:{...a,paymentType:Object.entries(H)[0][0]||"",bank_transfer$account_no:a.bank_transfer$account_no||"",bank_transfer$account_name:a.bank_transfer$account_name||"",bank_transfer$bank_name:a.bank_transfer$bank_name||"",bank_transfer$ifsc_code:a.bank_transfer$ifsc_code||"",bank_transfer$account_type:a.bank_transfer$account_type||"",bank_transfer$bank_address:a.bank_transfer$bank_address||"",bank_transfer$sort_code:a.bank_transfer$sort_code||"",bank_transfer$routing_number:a.bank_transfer$routing_number||"",upi$upi_id:a.upi$upi_id||"",interac$email:a.interac$email||"",interac$mobile_no:a.interac$mobile_no||"",zelle$email:a.zelle$email||"",zelle$mobile_no:a.zelle$mobile_no||"","m-pesa$name":a["m-pesa$name"]||"","m-pesa$mobile_no":a["m-pesa$mobile_no"]||"",mtn_mobile_money$name:a.mtn_mobile_money$name||"",mtn_mobile_money$mobile_no:a.mtn_mobile_money$mobile_no||"",cash_app$cash_tag_id:a.cash_app$cash_tag_id||""},validationSchema:he,onSubmit:s,children:({isSubmitting:l,values:r})=>e.jsxs(i,{container:!0,component:O,spacing:1,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(Me,{size:"small",name:"paymentType",label:"Payment Type",disabled:l,sx:{minWidth:{md:200},"& .MuiListItemIcon-root":{display:"none"}},children:Object.entries(H).map(([b,j],f)=>e.jsxs(je,{value:b,children:[e.jsx(be,{children:e.jsx(X,{component:"img",src:j,sx:{height:25,width:25}})}),b]},f))})}),e.jsx(i,{item:!0,xs:12,md:6}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="Bank Transfer"?"block":"none"},children:e.jsx(h,{size:"small",name:"bank_transfer$account_no",label:e.jsxs(e.Fragment,{children:["Account no ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="Bank Transfer"?"block":"none"},children:e.jsx(h,{size:"small",name:"bank_transfer$account_name",label:e.jsxs(e.Fragment,{children:["Account Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="Bank Transfer"?"block":"none"},children:e.jsx(h,{size:"small",name:"bank_transfer$bank_name",label:e.jsxs(e.Fragment,{children:["Bank Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="Bank Transfer"?"block":"none"},children:e.jsx(h,{size:"small",name:"bank_transfer$bank_address",label:e.jsxs(e.Fragment,{children:["Bank Address",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="Bank Transfer"?"block":"none"},children:e.jsx(h,{size:"small",name:"bank_transfer$ifsc_code",label:e.jsxs(e.Fragment,{children:["IFSC Code",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="UPI"?"block":"none"},children:e.jsx(h,{size:"small",name:"upi$upi_id",label:e.jsxs(e.Fragment,{children:["UPI ID ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="INTERAC"?"block":"none"},children:e.jsx(h,{size:"small",name:"interac$email",type:"text",label:e.jsxs(e.Fragment,{children:["Email ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="INTERAC"?"block":"none"},children:e.jsx(F,{size:"small",name:"interac$mobile_no",type:"text",label:"Mobile No",disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="ZELLE"?"block":"none"},children:e.jsx(h,{size:"small",name:"zelle$email",type:"text",label:e.jsxs(e.Fragment,{children:["Email ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="ZELLE"?"block":"none"},children:e.jsx(F,{size:"small",name:"zelle$mobile_no",type:"text",label:"Mobile No",disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="M-PESA"?"block":"none"},children:e.jsx(h,{size:"small",name:"m-pesa$name",type:"text",label:e.jsxs(e.Fragment,{children:["Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="M-PESA"?"block":"none"},children:e.jsx(F,{size:"small",name:"m-pesa$mobile_no",type:"text",label:e.jsxs(e.Fragment,{children:["Mobile No ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="MTN MOBILE MONEY"?"block":"none"},children:e.jsx(h,{size:"small",name:"mtn_mobile_money$name",type:"text",label:e.jsxs(e.Fragment,{children:["Name ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="MTN MOBILE MONEY"?"block":"none"},children:e.jsx(F,{size:"small",name:"mtn_mobile_money$mobile_no",type:"text",label:e.jsxs(e.Fragment,{children:["Mobile No ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,md:6,sx:{display:r.paymentType==="Cash App"?"block":"none"},children:e.jsx(h,{size:"small",name:"cash_app$cash_tag_id",label:e.jsxs(e.Fragment,{children:["Cash Tag ID ",e.jsx("span",{style:{color:"red"},children:"*"})]}),disabled:t==="view"||l})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(x,{direction:"row",alignItems:"center",spacing:2,sx:{width:"100%",display:t==="view"?"none":"flex"},children:[e.jsx(_,{sx:{maxWidth:"50%"},variant:"outlined",component:N,to:`${$.base}profile/paymentdetails`,children:"Discard"}),e.jsx(G,{sx:{maxWidth:"50%"},children:"Save Changes"})]})})]})})]})},Ge=({user:t})=>e.jsx(w,{id:"profileDetails",direction:"column",justifyContent:"start",spacing:2,children:e.jsx(R,{initialValues:{firstName:t==null?void 0:t.firstName,lastName:t==null?void 0:t.lastName,email:t==null?void 0:t.email,phoneNumber:t==null?void 0:t.phoneNumber,profileImage:t==null?void 0:t.profileImage,password:"........"},onSubmit:()=>{},children:()=>e.jsx(x,{height:"100%",component:O,children:e.jsx(oe,{disabled:!0})})})}),Ye=({user:t})=>{var b,j,f,u,z,v,M,p,k,I;const{p2pcoinpair:d}=ve(),a=d!=null&&d.coinPairList?[...new Set(d.coinPairList.filter(({p2p_active:n})=>!!n).map(({coin:n})=>n))]:[],{data:o}=W("collection",`users/${t==null?void 0:t.uid}/reviews`).collectionSnapshot(),{data:s}=W("collection","p2p_trade_book",[(t==null?void 0:t.uid)||""]).collectionSnapshot([ge("uid","==",t==null?void 0:t.uid)]),{data:l}=W("collectionGroup","p2p_request_trades").collectionSnapshot([fe("requestPlacedTime","asc")]),r=T.useMemo(()=>{var n;return o!=null&&o.length?((n=o==null?void 0:o.map(({rating:c})=>c))==null?void 0:n.reduce((c,y)=>c+y,0))/(o==null?void 0:o.length):0},[(b=o==null?void 0:o.map(({rating:n})=>n))==null?void 0:b.reduce((n,c)=>n+c,0)]);return s&&l?e.jsxs(x,{component:P,spacing:2,sx:{px:0},children:[e.jsxs(w,{direction:"column",spacing:2,customTitle:e.jsxs(x,{direction:"row",justifyContent:"space-between",sx:{width:"100%"},children:[e.jsxs(m,{variant:"h6",fontWeight:600,children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]}),e.jsx(_,{component:N,to:"..",startIcon:e.jsx(Ae,{}),children:"Back"})]}),children:[e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,sm:4,children:e.jsx(x,{spacing:2,children:e.jsx(Y,{sx:{height:100,width:100},src:`https://api.sun100.io${t==null?void 0:t.profileImage}`})})}),e.jsx(i,{item:!0,xs:12,sm:4,children:e.jsx(C,{medium:!0,title:"User Ratings",label:e.jsx(x,{direction:"row",spacing:0,children:new Array(5).fill(void 0).map((n,c)=>e.jsx(D,{disableRipple:!0,size:"small",color:r>c?"primary":void 0,children:r>c?e.jsx(J,{}):e.jsx(Q,{})},c))}),node:!0})}),e.jsx(i,{item:!0,xs:12,sm:4}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:"Total Trades",label:`${(j=s==null?void 0:s.filter(({status:n})=>n==="completed"))==null?void 0:j.length}/${s==null?void 0:s.length}`,node:!0})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:"Sell Orders",label:`${(f=s==null?void 0:s.filter(({orderType:n,status:c})=>n==="sell"&&c==="completed"))==null?void 0:f.length}/${(u=s==null?void 0:s.filter(({orderType:n})=>n==="sell"))==null?void 0:u.length}`,node:!0})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:"Buy Orders",label:`${(z=s==null?void 0:s.filter(({orderType:n,status:c})=>n==="buy"&&c==="completed"))==null?void 0:z.length}/${(v=s==null?void 0:s.filter(({orderType:n})=>n==="buy"))==null?void 0:v.length}`,node:!0})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:"User Requests",label:`${(M=l==null?void 0:l.filter(({requestuid:n,requestStatus:c})=>n===(t==null?void 0:t.uid)&&c==="completed"))==null?void 0:M.length}/${(p=l==null?void 0:l.filter(({requestuid:n})=>n===(t==null?void 0:t.uid)))==null?void 0:p.length}`,node:!0})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:"Received Requests",label:`${(k=l==null?void 0:l.filter(({tradeuid:n,requestStatus:c})=>n===(t==null?void 0:t.uid)&&c==="completed"))==null?void 0:k.length}/${(I=l==null?void 0:l.filter(({tradeuid:n})=>n===(t==null?void 0:t.uid)))==null?void 0:I.length}`,node:!0})}),e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:"Joined",label:e.jsx(ue,{date:t==null?void 0:t.created_At}),node:!0})})]}),e.jsx(ne,{}),e.jsx(m,{variant:"h6",children:"Asset Transactions"}),e.jsx(V,{sx:{pl:2},children:e.jsxs(i,{container:!0,spacing:2,sx:{p:2,bgcolor:n=>`${n.palette.success.light}20`,borderRadius:2,border:n=>`1px solid ${n.palette.success.main}50`},children:[a.map(n=>{var c,y;return e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:`${n} Sell`,label:e.jsx(K,{number:(y=(c=s==null?void 0:s.filter(g=>g.orderType==="sell"&&g.coin===n&&g.status==="completed"))==null?void 0:c.map(({noOfCoins:g})=>g))==null?void 0:y.reduce((g,B)=>g+B,0),type:"coin",coin:n}),node:!0})})}),a.map(n=>{var c,y;return e.jsx(i,{item:!0,xs:6,sm:3,children:e.jsx(C,{medium:!0,title:`${n} Buy`,label:e.jsx(K,{number:(y=(c=s==null?void 0:s.filter(g=>g.orderType==="buy"&&g.coin===n&&g.status==="completed"))==null?void 0:c.map(({noOfCoins:g})=>g))==null?void 0:y.reduce((g,B)=>g+B,0),type:"coin",coin:n}),node:!0})})})]})})]}),e.jsx(w,{spacing:2,customTitle:e.jsxs(m,{variant:"h6",fontWeight:800,children:["Reviews (",o==null?void 0:o.length,")"]}),children:o!=null&&o.length?o==null?void 0:o.map(n=>e.jsxs(x,{spacing:1,sx:{bgcolor:c=>c.palette.grey[100],border:c=>`1px solid ${c.palette.grey[200]}`,p:1,borderRadius:2},children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Y,{src:n!=null&&n.profile?`${$.baseURL}${n==null?void 0:n.profile}`:`https://avatars.dicebear.com/api/initials/${n==null?void 0:n.username}.svg`}),e.jsx(m,{variant:"body2",textTransform:"capitalize",children:n==null?void 0:n.username})]}),e.jsx(x,{direction:"row",spacing:0,children:new Array(5).fill(void 0).map((c,y)=>e.jsx(D,{disableRipple:!0,size:"small",color:(n==null?void 0:n.rating)>y?"primary":void 0,children:(n==null?void 0:n.rating)>y?e.jsx(J,{}):e.jsx(Q,{})},y))}),e.jsxs(m,{variant:"caption",color:"text.secondary",sx:{pl:1},children:["Reviewed On ",new Date(n.time).toLocaleString()]}),e.jsx(m,{variant:"body2",sx:{bgcolor:c=>c.palette.grey[100],p:1},children:n==null?void 0:n.comment})]})):e.jsx(m,{variant:"h6",textAlign:"center",sx:{p:5},children:"No Reviews Found"})})]}):e.jsx(se,{})},Ke=({user:t,update:d})=>e.jsxs(w,{id:"twoFactorAuthentication",direction:"column",justifyContent:"start",spacing:2,height:"100%",children:[e.jsx(m,{variant:"h5",children:"Security Details"}),e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(m,{variant:"body1",children:"Two-Factor Authentication"}),t!=null&&t.enableTwoFactor?e.jsx(_,{color:"primary",variant:"contained",component:N,to:`${$.base}profile/two-factor/false`,children:"Disable"}):e.jsx(_,{variant:"contained",component:N,sx:{borderRadius:"15px"},to:`${$.base}profile/two-factor/true`,children:"Enable"})]})]}),Ze=({sessions:t})=>{var d,a,o;return e.jsxs(w,{id:"sessionHistory",direction:"column",justifyContent:"start",spacing:2,sx:{height:{sm:1e3},maxHeight:1e3,py:0},children:[e.jsx(m,{variant:"h5",children:"Session History"}),e.jsx(x,{spacing:2,sx:{height:"600px",overflowY:"auto"},children:(o=(a=(d=t==null?void 0:t.userDetails)==null?void 0:d.slice())==null?void 0:a.reverse())==null?void 0:o.map((s,l)=>e.jsxs(T.Fragment,{children:[e.jsx(x,{children:e.jsx(m,{color:s.status=="Complete"?"success.light":"error.light",variant:"body2",sx:{mb:-2,p:.2,width:"18%",textAlign:"center",borderRadius:"5px",fontWeight:600,color:`${s.status=="Complete"?"#1c9916":"error.dark"}`,bgcolor:`${s.status==="Complete"?"#d8ffe5":"error.light"}`},children:s.status})}),e.jsxs(x,{direction:"row",gap:{xs:5,sm:25},children:[e.jsxs(m,{noWrap:!0,variant:"body2",children:[s.device==""?"---":s.device,e.jsx(m,{noWrap:!0,variant:"body2",children:s.ipAddress})]}),e.jsxs(m,{noWrap:!0,variant:"body2",color:"text.secondary",children:[s.OS==""?"---":s.OS,e.jsx(m,{noWrap:!0,variant:"body2",color:"text.secondary",children:ye(s.created_At)})]})]}),e.jsx(ne,{})]},l))})]})},Je=()=>e.jsx(P,{maxWidth:"md",sx:{px:{xs:0,sm:1}},children:e.jsx(w,{direction:"column",justifyContent:"center",alignItems:"center",spacing:2,sx:{height:"80vh",px:{xs:0,sm:1}},children:e.jsx(Ne,{})})}),oe=({disabled:t})=>{const{user:d}=T.useContext(ae),{values:a}=q(),{state:o}=U(),s=E(),l=()=>{s(`${$.base}remove-profile`,{state:o})},r=()=>{s(`${$.base}profile/change-password`,{state:o})};return e.jsxs(i,{container:!0,gap:2,sx:{p:0,m:0},children:[e.jsx(i,{item:!0,xs:12,children:e.jsxs(x,{direction:"row",alignItems:"center",children:[e.jsx($e,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.jsx(D,{onClick:()=>{var b;return(b=document.getElementById("browseprofileImage"))==null?void 0:b.click()},sx:{width:{xs:25,md:30},height:{xs:25,md:30},color:"#000",bgcolor:"#fff","&:hover":{bgcolor:"gray"}},children:e.jsx(L,{sx:{width:15}})}),children:e.jsx(Ie,{avatar:!0,disabled:t,name:"profileImage",initName:`${d==null?void 0:d.firstName}_${d==null?void 0:d.lastName}`,sx:{width:{xs:50,md:75},height:{xs:50,md:75}}})}),{undefined:a.profileImage&&e.jsx(Z,{sx:{pt:3,cursor:"pointer"},onClick:l,children:"Remove Photo"})}[t]]})}),e.jsxs(i,{item:!0,xs:12,container:!0,spacing:1,children:[e.jsx(i,{item:!0,xs:12,children:e.jsxs(x,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:1,children:[e.jsx(m,{variant:"h5",fontSize:{xs:"18px",md:"24px"},fontWeight:600,children:"Personal Details"}),e.jsx(_,{id:"editProfile",endIcon:e.jsx(L,{}),variant:"outlined",color:"secondary",sx:{border:"none"},onClick:()=>s(`${$.base}profile/edit`),children:"Edit"})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(h,{label:"First Name",name:"firstName",size:"small",disabled:t})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(h,{label:"Last Name",name:"lastName",size:"small",disabled:t})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(h,{label:"Email",name:"email",size:"small",disabled:!0})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsx(F,{size:"small",name:"phoneNumber",type:"text",label:"Contact number",disabled:t})})]}),e.jsx(i,{container:!0,gap:1,children:e.jsx(i,{item:!0,xs:12,sm:12,children:e.jsxs(x,{direction:"row",display:"flex",justifyContent:"space-between",alignItems:"center",spacing:2,width:"100%",children:[e.jsxs(i,{width:"100%",children:[e.jsx(m,{variant:"h5",fontSize:{xs:"18px",md:"24px"},fontWeight:600,children:"Password"}),e.jsx(h,{name:"password",type:"password",size:"small",disabled:!0,sx:{pointerEvents:"none","& fieldset":{border:"none"},"& .MuiInputBase-input":{fontSize:"2rem",fontWeight:"bold",mt:"-25px",ml:"-15px"}},InputProps:{endAdornment:e.jsx(_e,{position:"end",children:e.jsx(Z,{id:"changePassword",color:"primary",fontWeight:"bold",variant:"caption",onClick:r,sx:{pointerEvents:"auto",cursor:"pointer"}})})}})]}),e.jsx(_,{id:"editProfile",endIcon:e.jsx(L,{sx:{width:15}}),variant:"outlined",color:"secondary",sx:{border:"none"},onClick:r,children:"Change"})]})})})]})},Qe=({user:t,update:d,updatePayment:a,payment:o,sessions:s})=>{const l=[{id:0,active:!0,linkName:"Account Settings",icon:e.jsx(De,{sx:{fontSize:"30px"}})},{id:2,active:!1,linkName:"KYC",icon:e.jsx(Re,{sx:{fontSize:"30px"}})},{id:3,active:!1,linkName:"Session History",icon:e.jsx(Oe,{sx:{fontSize:"30px"}})},{id:4,active:!1,linkName:"Security Details",icon:e.jsx(Be,{sx:{fontSize:"30px"}})}],[r,b]=A.useState(l),[j,f]=A.useState(!0);A.useState(0);const u=ke(),z=E(),v=p=>{z(p.linkName.replace(/\s+/g,"").toLowerCase());const k=l;k.forEach(I=>{I.linkName===p.linkName?I.active=!0:I.active=!1}),b(k)},{pathname:M}=U();return A.useEffect(()=>{const p=l;p.forEach(k=>{M.includes(k.linkName.replace(/\s+/g,"").toLowerCase())?k.active=!0:k.active=!1}),b(p)},[]),e.jsxs(P,{maxWidth:"md",sx:{height:"730px",display:"flex",pb:5},children:[e.jsxs(V,{component:"div",width:{xs:`${j?"18%":"100%"}`,sm:"22%"},bgcolor:u.palette.mode==="light"?"#fff":"#000",borderRadius:"4px",marginRight:"2px",overflow:"hidden",children:[e.jsx(D,{sx:{margin:"10px 0px 0xp 10px",display:{xs:"block",sm:"none"}},onClick:()=>f(!j),children:j?e.jsx(Ce,{}):e.jsx(Ee,{})}),r.map(p=>e.jsxs(i,{width:"100%",display:"flex",gap:1,alignItems:"center",padding:1,marginBottom:1,sx:{cursor:"pointer",bgcolor:`${p.active?"#fff8eb":null}`,color:`${p.active?"#fcb922":null}`,borderLeft:`${p.active?"2px solid #FCB923":"2px solid transparent"}`,borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px",":hover":{bgcolor:"#fff8eb",color:`${!p.active&&"#000"}`}},onClick:()=>v(p),children:[e.jsx(m,{children:p.icon}),e.jsxs(m,{onClick:()=>f(!j),sx:{fontSize:"14px",fontWeight:`${p.active?600:null}`,display:{xs:`${j&&"none"}`,sm:"block"}},children:[" ",p.linkName]})]},p.id))]}),e.jsx(V,{component:"div",overflow:"auto",width:{xs:"100%",sm:"78%"},bgcolor:u.palette.mode==="light"?"#fff":"#000",display:{xs:`${!j&&"none"}`,sm:"block"},sx:{borderTopRightRadius:"4px",borderBottomRightRadius:"4px",p:1.25},children:e.jsx(te,{})})]})},ct=()=>{const[t,d]=T.useState(!0),{user:a,update:o}=T.useContext(ae),{updatePayment:s,payemntDetials:l,payment:r,loading:b}=ze(a==null?void 0:a.uid),{sessions:j,loading:f}=Le();return T.useLayoutEffect(()=>{const u=Object.keys(H).map(v=>v.replaceAll(" ","_"));(async()=>{await Promise.all(u.map(async v=>l(v,a==null?void 0:a.uid,!0))),d(!1)})()},[b]),t||f||a===void 0||r===void 0?e.jsx(se,{}):we([{path:"",element:e.jsx(ee,{to:"accountsettings"})},{path:"/",element:e.jsx(Qe,{user:a,update:o,updatePayment:s,payment:r,sessions:j}),children:[{path:"accountsettings",element:e.jsx(Ge,{user:a})},{path:"paymentdetails",element:e.jsx(le,{variant:"view",updatePayment:s,payment:r})},{path:"KYC",element:e.jsx(Te,{}),children:[{path:"complete",element:e.jsx(Se,{})},{path:"warning",element:e.jsx(Fe,{})}]},{path:"sessionhistory",element:e.jsx(Ze,{sessions:j})},{path:"securitydetails",element:e.jsx(Ke,{user:a,update:o})},{path:"edit",element:e.jsx(He,{user:a}),children:[{path:"remove-profile",element:e.jsx(We,{})}]},{path:"change-password",element:e.jsx(Ve,{})},{path:"portfolio",element:e.jsx(Ye,{user:a})},{path:"payment-edit",element:e.jsx(Ue,{updatePayment:s,payment:r})},{path:"two-factor/:status",element:e.jsx(Je,{}),children:[{path:"success",element:e.jsx(Pe,{})}]}]}])};export{ct as default};

import{j as e,aL as V,S as s,ax as k,f as O,T as i,l as p,L as T,m as M,r as o,U as v,I as j,bW as E,Z as h,v as L,R as A,H as F,k as R,aG as D,O as P}from"./index-7c4d6238.js";import{u as W}from"./auth-e4923acc.js";const z=()=>e.jsx(V,{fullScreen:!1,children:e.jsxs(s,{component:k,spacing:3,alignItems:"center",children:[e.jsx(O,{component:"img",src:"/images/2fverify.jpeg",sx:{height:"auto",width:50}}),e.jsx(i,{variant:"h5",textAlign:"center",fontWeight:900,children:"Two-Factor Authentication Verified!"}),e.jsx(p,{size:"large",variant:"contained",component:T,to:M.base,children:"Done"})]})}),$=()=>{o.useContext(v);const{sendMail:n,verify:r,registerVerify:l,registerMail:c}=W(),[a,t]=o.useState(!1),[g,y]=o.useState(!1),[d,C]=o.useState(""),{pathname:b,state:u}=j(),m=b.split("/"),x=m[m.length-1],f=sessionStorage.getItem("email")?sessionStorage.getItem("email"):u==null?void 0:u.email,w=async()=>{t(!0),x==="verify"?(console.log("registerMail"),await c()):(console.log("sendMail"),await n()),t(!1),console.log("111111111"),y(!0)},S=async()=>{t(!0),x==="verify"?(console.log("registerVerify"),await l(d)):(console.log("verify2fa"),await r(d,x)),t(!1)};return e.jsxs(s,{spacing:2,sx:{bgcolor:I=>`${I.palette.primary.main}20`,p:2,borderRadius:2},children:[e.jsx(i,{variant:"body2",children:g?`We have sent you the code at ${f} Enter the code below.`:"Enter your email id. Weâ€™ll send a verification code to verify the two-factor authentication code."}),g?e.jsxs(s,{sx:{flexDirection:{xs:"column",sm:"row"}},spacing:1,alignItems:"flex-end",children:[e.jsx(E,{value:d,onChange:C,numInputs:6,containerStyle:"hide-border"}),e.jsx(h,{variant:"contained",onClick:S,loading:a,children:"Verify"})]}):e.jsxs(s,{sx:{flexDirection:{xs:"column",sm:"row"}},spacing:1,alignItems:"flex-end",children:[e.jsx(L,{placeholder:"Enter email",size:"small",value:f,disabled:!0,sx:{mr:1,borderRadius:2,bgcolor:"background.default","& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"transparent"}}}}),e.jsx(h,{variant:"contained",onClick:w,loading:a,children:"Send OTP"})]})]})},N=()=>{const{user:n}=A.useContext(v),r=F(),l=()=>r(-1),{pathname:c}=j(),a=c.split("/"),t=a[a.length-1];return e.jsxs(e.Fragment,{children:[e.jsxs(R,{component:s,spacing:2,sx:{height:"calc(100vh - 225px)",justifyContent:"center",mx:{sm:6}},children:[e.jsx(i,{variant:"h5",children:"Setup Two Factor Authentication"}),e.jsx(i,{variant:"subtitle1",children:"Give a valid email address for setting up a safe and secure account. Entering OTP will confirm your email for further verifications."}),e.jsx($,{}),e.jsx(i,{textAlign:"center",sx:{display:n!=null&&n.enableTwoFactor||t==="verify"?"none":void 0},children:e.jsx(D,{color:"text.secondary",component:p,onClick:l,children:"Remind me later"})})]}),e.jsx(P,{})]})};export{N as M,z as V};

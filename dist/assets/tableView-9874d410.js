import{R as p,U as y,b8 as h,I as b,j as n,S as f,T as t,$ as P,a0 as T,F as g,aV as A}from"./index-4567d11c.js";import{R as w,T as I,a as S}from"./responsive-table-d0b9fcb6.js";import{u as D}from"./use-utils-f92e6887.js";import{T as $,a as F,c as a,b as L}from"./TableRow-90bf4727.js";import{C as R}from"./CopyAll-c77268ed.js";const U=(m,u)=>{var s,o,l;const{trigger:e}=p.useContext(y),{data:i,isFetching:c}=h(["getTrades",e,m],{url:`/spot/trades?page=1&limit=100&uid=${u}&orderBy=desc&coinId=${m.replace("_","/")}`,method:"get"});return{trades:(i==null?void 0:i.data)||[],count:((s=i==null?void 0:i.data)==null?void 0:s.length)||0,openOrderCount:((l=(o=i==null?void 0:i.data)==null?void 0:o.filter(x=>["pending"].includes(x.status.toLowerCase())))==null?void 0:l.length)||0,loading:c}},k=m=>{const{trigger:u,user:e}=p.useContext(y),[i,c]=p.useState(0),[s,o]=p.useState(10),{data:l,isFetching:x}=h(["getTrades",u,i.toString()],{url:`/spot/trades?page=${i+1}&limit=${s}&uid=${e==null?void 0:e.uid}&orderBy=desc`,method:"get"}),j=r=>c(r-1),C=r=>o(r);return p.useEffect(()=>{c(0)},[m]),{trades:(l==null?void 0:l.data)||[],count:(l==null?void 0:l.totalCount)||0,loading:x,pageNo:i,pageLimit:s,handlePageNo:j,handlePageLimit:C}},z=({trades:m,type:u})=>{const{contentCopy:e}=D(),{pathname:i}=b(),c=m?m.sort((s,o)=>new Date(+o.orderPlacedTime||o.placedAt).getTime()-new Date(+s.orderPlacedTime||s.placedAt).getTime()).map(s=>{var o,l;return{id:n.jsxs(f,{direction:"row",alignItems:"center",children:[n.jsxs(t,{variant:"inherit",width:100,noWrap:!0,children:[s.tradeId," "]}),n.jsx(P,{size:"small",onClick:()=>e(s.tradeId),children:n.jsx(R,{fontSize:"inherit",color:"primary"})})]}),date:+(s==null?void 0:s.orderPlacedTime)||(s==null?void 0:s.placedAt),...i!=null&&i.includes("dashboard")?{pair:`${s.baseAsset}/${s==null?void 0:s.quoteAsset}`}:{},type:T[((s==null?void 0:s.orderType)||(s==null?void 0:s.orderTypeId))-1].split(" ").slice(0,-1).join(" "),side:n.jsx(t,{variant:"inherit",color:T[((s==null?void 0:s.orderType)||(s==null?void 0:s.orderTypeId))-1].includes("Buy")?"success.main":"error.main",children:T[((s==null?void 0:s.orderType)||(s==null?void 0:s.orderTypeId))-1].split(" ").slice(-1)[0]}),price:n.jsx(g,{number:[2,3,5,6].includes((s==null?void 0:s.orderType)||(s==null?void 0:s.orderTypeId))&&s.status!=="done"?s==null?void 0:s.limitPrice:(s==null?void 0:s.marketPrice)||(s==null?void 0:s.filledPrice)||(s==null?void 0:s.limitPrice),type:"coin",coin:s==null?void 0:s.quoteAsset}),quantity:n.jsx(g,{number:s.noOfCoins,type:"coin",coin:s==null?void 0:s.baseAsset}),amount:n.jsx(g,{number:s.orderAmount,type:"coin",coin:s==null?void 0:s.quoteAsset}),...u==="trades"?{commission:n.jsx(g,{number:((s==null?void 0:s.commisionAmount)||(s==null?void 0:s.commissionFee))+((s==null?void 0:s.fee)||0),type:"coin",coin:(l=(o=T[(s.orderTypeId||s.orderType)-1])==null?void 0:o.toUpperCase())!=null&&l.includes("BUY")?s.baseAsset:s==null?void 0:s.quoteAsset}),tdsFee:s==null?void 0:s.tdsFee}:{},...i!=null&&i.includes("spot")?{status:n.jsx(t,{color:{cancelled:"error.main",canceled:"error.main",dispute:"error.main",pending:"warning.main",open:"warning.main",failed:"warning.main",partiallyPending:"error.main",declined:"error.main",expired:"warning.main",confirm:"success.main",confirmed:"success.main",completed:"success.main",done:"success.main",filled:"success.main"}[s==null?void 0:s.status.toLowerCase()],variant:"inherit",sx:{textTransform:"capitalize"},children:["FILLED","done"].includes(s.status)?"Completed":["NEW","open"].includes(s.status)?"Pending":["CANCELED","canceled"].includes(s.status)?"Cancelled":s.status.toLowerCase()})}:{}}}):[];return i!=null&&i.includes("dashboard")?n.jsx(w,{titles:["Trade ID","Date","Pair","Type","Side","Price","Quantity","Amount","Commission"],data:c}):n.jsx(v,{titles:["Trade ID","Date","Type","Side","Price","Quantity","Amount",...u==="trades"?["Commission"]:[],"TDS Fee","Status"],data:c})},v=({id:m,titles:u,data:e,hide:i,height:c})=>n.jsx(I,{id:m,sx:{maxHeight:450,minHeight:c?185:void 0},children:n.jsxs($,{stickyHeader:!0,size:"small",children:[n.jsx(F,{sx:{display:i?"none":void 0},children:u.map((s,o)=>n.jsx(a,{sx:{border:"none",px:.6},children:n.jsx(t,{noWrap:!0,variant:"caption",color:"text.secondary",children:s})},o))}),n.jsx(S,{children:e==null?void 0:e.map((s,o)=>n.jsx(E,{...s},o))})]})}),E=m=>{var u;return n.jsx(L,{children:(u=Object.entries(m))==null?void 0:u.map(([e,i],c,s)=>n.jsx(a,{sx:{border:"none",px:.6,py:s.length>3?.8:.1,width:c?void 0:100},children:n.jsx(t,{noWrap:!0,variant:"caption",children:e==="date"?A(i):i})},c))})};export{z as O,v as T,k as a,U as u};
